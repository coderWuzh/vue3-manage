import{d as L,r as V,z as E,B as Q,k as R,m as j,P as W,n as X,A as Y,C as Z,i as ee,Q as ae,D as le,F as te,G as oe,a as U,b as v,p as e,w as o,u as g,o as f,s as i,R as ne,H as y,t as ue,I,J as h,K as se,L as ie,M as de,N as p,_ as re}from"./index.f448508d.js";/* empty css                      *//* empty css                     *//* empty css                    *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                        */import{h as C}from"./request.db4fb3b6.js";const ce={class:"table-container"},pe={class:"container"},me={class:"handle-box"},_e={class:"pagination"},ge=["src"],fe={class:"dialog-footer"},be=L({__name:"goodsTable",setup(ve){const w=(n,l)=>{a.imgUrl=n.data,console.log(a.imgUrl)},B=n=>!0,u=V({name:"",pageIndex:1,pageSize:10}),F=E([]),x=E(0),d=()=>{C.$axios({url:"/api/goods/getData"}).then(n=>{F.value=n.data,x.value=n.data.length})};d();const k=n=>{C.$axios({url:"/api/goods/insertData",method:"POST",data:{form:JSON.stringify(n)}}).then(l=>{l.success?p.success("\u6DFB\u52A0\u6210\u529F"):p.error("\u6DFB\u52A0\u5931\u8D25")}),d()},S=()=>{s.value=!0,a.goods_id=0,a.name="",a.price=0,a.num=0,a.imgUrl="",s.value=!0,b=-1},T=()=>{u.pageIndex=1,d()},$=n=>{u.pageIndex=n,d()},z=n=>{de.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{C.$axios({url:"/api/goods/deleteData",method:"POST",data:{goods_id:n+(u.pageIndex-1)*10}}).then(l=>{l.success?(p.success("\u5220\u9664\u6210\u529F"),d()):p.error("\u4FEE\u6539\u5931\u8D25")})}).catch(()=>{})},s=E(!1),a=V({id:0,goods_id:0,name:"",price:0,num:0,imgUrl:""});let b=-1;const A=(n,l)=>{b=n+(u.pageIndex-1)*10,a.goods_id=l.goods_id,a.name=l.name,a.price=l.price,a.num=l.num,a.imgUrl=l.imgUrl,s.value=!0},N=()=>{s.value=!1,b==-1?(console.log(a),k(a)):C.$axios({url:"/api/goods/editData",method:"POST",data:{form:JSON.stringify(a)}}).then(n=>{n.success?(p.success(`\u4FEE\u6539\u7B2C ${b+1} \u884C\u6210\u529F`),d()):p.error("\u4FEE\u6539\u5931\u8D25")})};return(n,l)=>{const m=Q,r=R,c=j,P=W,O=X,J=Y,_=Z,M=ee,q=ae,G=le,H=te,D=oe("permiss");return f(),U("div",ce,[v("div",pe,[v("div",me,[e(m,{modelValue:u.name,"onUpdate:modelValue":l[0]||(l[0]=t=>u.name=t),placeholder:"\u641C\u7D22",class:"handle-input mr10"},null,8,["modelValue"]),e(r,{type:"primary",icon:g(ne),onClick:T,color:"#b0352f"},{default:o(()=>[i(" \u641C\u7D22 ")]),_:1},8,["icon"]),e(r,{type:"primary",icon:g(y),color:"#b0352f",onClick:S},{default:o(()=>[i(" \u65B0\u589E ")]),_:1},8,["icon"])]),e(O,{ref:"multipleTable",data:F.value.slice((u.pageIndex-1)*u.pageSize,u.pageIndex*u.pageSize),border:"",class:"table","header-cell-class-name":"table-header"},{default:o(()=>[e(c,{prop:"goods_id",label:"ID",width:"55",align:"center"}),e(c,{prop:"name",label:"\u5546\u54C1\u540D",align:"center"}),e(c,{label:"\u5546\u54C1\u56FE(\u70B9\u51FB\u67E5\u770B\u5927\u56FE)",align:"center"},{default:o(t=>[e(P,{class:"table-td-thumb",src:t.row.imgUrl,"z-index":10,"preview-src-list":[t.row.imgUrl],"preview-teleported":""},null,8,["src","preview-src-list"])]),_:1}),e(c,{label:"\u4EF7\u683C",align:"center"},{default:o(t=>[i(" \uFFE5"+ue(t.row.price),1)]),_:1}),e(c,{prop:"num",label:"\u6570\u91CF",align:"center"}),e(c,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:o(t=>[I((f(),h(r,{text:"",icon:g(se),onClick:K=>A(t.$index,t.row)},{default:o(()=>[i(" \u7F16\u8F91 ")]),_:2},1032,["icon","onClick"])),[[D,15]]),I((f(),h(r,{text:"",icon:g(ie),class:"del",onClick:K=>z(t.$index)},{default:o(()=>[i(" \u5220\u9664 ")]),_:2},1032,["icon","onClick"])),[[D,16]])]),_:1})]),_:1},8,["data"]),v("div",_e,[e(J,{background:"",layout:"total, prev, pager, next","current-page":u.pageIndex,"page-size":u.pageSize,total:x.value,onCurrentChange:$},null,8,["current-page","page-size","total"])])]),e(H,{modelValue:s.value,"onUpdate:modelValue":l[6]||(l[6]=t=>s.value=t),title:"\u7F16\u8F91",width:"30%"},{footer:o(()=>[v("span",fe,[e(r,{onClick:l[5]||(l[5]=t=>s.value=!1)},{default:o(()=>[i("\u53D6 \u6D88")]),_:1}),e(r,{type:"primary",onClick:N},{default:o(()=>[i("\u786E \u5B9A")]),_:1})])]),default:o(()=>[e(G,{"label-width":"70px"},{default:o(()=>[e(_,{label:"\u5546\u54C1id"},{default:o(()=>[e(m,{modelValue:a.goods_id,"onUpdate:modelValue":l[1]||(l[1]=t=>a.goods_id=t)},null,8,["modelValue"])]),_:1}),e(_,{label:"\u5546\u54C1\u540D"},{default:o(()=>[e(m,{modelValue:a.name,"onUpdate:modelValue":l[2]||(l[2]=t=>a.name=t)},null,8,["modelValue"])]),_:1}),e(_,{label:"\u5546\u54C1\u4EF7\u683C"},{default:o(()=>[e(m,{modelValue:a.price,"onUpdate:modelValue":l[3]||(l[3]=t=>a.price=t)},null,8,["modelValue"])]),_:1}),e(_,{label:"\u5546\u54C1\u56FE\u7247",style:{width:"300px"}},{default:o(()=>[e(q,{class:"avatar-uploader",action:"http://gmall-h5-api.atguigu.cn/admin/product/fileUpload","show-file-list":!1,"on-success":w,"before-upload":B},{default:o(()=>[a.imgUrl?(f(),U("img",{key:0,src:a.imgUrl,class:"avatar"},null,8,ge)):(f(),h(M,{key:1,class:"avatar-uploader-icon"},{default:o(()=>[e(g(y))]),_:1}))]),_:1})]),_:1}),e(_,{label:"\u5546\u54C1\u6570\u91CF"},{default:o(()=>[e(m,{modelValue:a.num,"onUpdate:modelValue":l[4]||(l[4]=t=>a.num=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const Ie=re(be,[["__scopeId","data-v-7385f169"]]);export{Ie as default};
