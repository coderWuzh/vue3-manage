import{d as U,r as C,z as v,k as J,m as M,n as q,A as G,B as H,C as K,D as L,F as j,G as Q,a as R,b as g,p as a,w as l,u as x,o as D,s as m,H as W,I as B,J as V,K as X,L as Y,M as Z,N as i,_ as ee}from"./index.f448508d.js";/* empty css                      *//* empty css                     *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                        */import{h as f}from"./request.db4fb3b6.js";const ae={class:"table-container"},te={class:"container"},oe={class:"handle-box"},le={class:"pagination"},ne={class:"dialog-footer"},se=U({__name:"authority",setup(ue){const s=C({name:"",pageIndex:1,pageSize:10}),E=v([]),y=v(0),d=()=>{f.$axios({url:"/api/admin/getData"}).then(o=>{E.value=o.data,y.value=o.data.length})};d();const w=o=>{f.$axios({url:"/api/admin/addAdmin",method:"POST",data:{form:JSON.stringify(o)}}).then(e=>{e.success?i.success("\u6DFB\u52A0\u6210\u529F"):i.error("\u6DFB\u52A0\u5931\u8D25")}),d()},k=()=>{t.admin_name="",t.password="",t.authority="",u.value=!0,_=-1},I=o=>{s.pageIndex=o,d()},A=o=>{r=o.id,Z.confirm("\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{type:"warning"}).then(()=>{f.$axios({url:"/api/admin/deleteAdmin",method:"POST",data:{admin_id:r}}).then(e=>{e.success?(i.success("\u5220\u9664\u6210\u529F"),d()):i.error("\u4FEE\u6539\u5931\u8D25")})}).catch(()=>{})},u=v(!1),t=C({admin_name:"",password:"",authority:""});let _=-1,r;const S=(o,e)=>{r=e.id,_=o+(s.pageIndex-1)*10,t.admin_name=e.admin_name,t.password=e.password,t.authority=e.authority,u.value=!0,console.log(r)},$=()=>{u.value=!1,_==-1?(console.log(t),w(t)):f.$axios({url:"/api/admin/editAdmin",method:"POST",data:{admin_id:r,form:JSON.stringify(t)}}).then(o=>{o.success?(i.success(`\u4FEE\u6539\u7B2C ${_+1} \u884C\u6210\u529F`),d()):i.error("\u4FEE\u6539\u5931\u8D25")})};return(o,e)=>{const c=J,p=M,T=q,z=G,h=H,b=K,N=L,O=j,F=Q("permiss");return D(),R("div",ae,[g("div",te,[g("div",oe,[a(c,{type:"primary",icon:x(W),color:"#b0352f",onClick:k},{default:l(()=>[m(" \u65B0\u589E ")]),_:1},8,["icon"])]),a(T,{ref:"multipleTable",data:E.value.slice((s.pageIndex-1)*s.pageSize,s.pageIndex*s.pageSize),border:"",class:"table","header-cell-class-name":"table-header"},{default:l(()=>[a(p,{prop:"id",label:"ID",width:"55",align:"center"}),a(p,{prop:"admin_name",label:"\u7BA1\u7406\u5458\u8D26\u53F7",align:"center"}),a(p,{prop:"password",label:"\u5BC6\u7801",align:"center"}),a(p,{prop:"authority",label:"\u6743\u9650",align:"center"}),a(p,{label:"\u64CD\u4F5C",width:"220",align:"center"},{default:l(n=>[B((D(),V(c,{text:"",icon:x(X),onClick:P=>S(n.$index,n.row)},{default:l(()=>[m(" \u7F16\u8F91 ")]),_:2},1032,["icon","onClick"])),[[F,15]]),B((D(),V(c,{text:"",icon:x(Y),class:"del",onClick:P=>A(n.row)},{default:l(()=>[m(" \u5220\u9664 ")]),_:2},1032,["icon","onClick"])),[[F,16]])]),_:1})]),_:1},8,["data"]),g("div",le,[a(z,{background:"",layout:"total, prev, pager, next","current-page":s.pageIndex,"page-size":s.pageSize,total:y.value,onCurrentChange:I},null,8,["current-page","page-size","total"])])]),a(O,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=n=>u.value=n),title:"\u7F16\u8F91",width:"30%"},{footer:l(()=>[g("span",ne,[a(c,{onClick:e[3]||(e[3]=n=>u.value=!1)},{default:l(()=>[m("\u53D6 \u6D88")]),_:1}),a(c,{type:"primary",onClick:$},{default:l(()=>[m("\u786E \u5B9A")]),_:1})])]),default:l(()=>[a(N,{"label-width":"70px"},{default:l(()=>[a(b,{label:"\u8D26\u53F7"},{default:l(()=>[a(h,{modelValue:t.admin_name,"onUpdate:modelValue":e[0]||(e[0]=n=>t.admin_name=n)},null,8,["modelValue"])]),_:1}),a(b,{label:"\u5BC6\u7801"},{default:l(()=>[a(h,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.password=n)},null,8,["modelValue"])]),_:1}),a(b,{label:"\u6743\u9650"},{default:l(()=>[a(h,{modelValue:t.authority,"onUpdate:modelValue":e[2]||(e[2]=n=>t.authority=n)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const fe=ee(se,[["__scopeId","data-v-7382ae3b"]]);export{fe as default};
